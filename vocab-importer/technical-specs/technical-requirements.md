# Technical Specifications: Vocabulary Importer Tool

## 1. Overview

This document outlines the technical specifications for a vocabulary generation and import tool for the Jamaican Patois language learning application. The tool will enable rapid population of the application's database with words and word groups generated by various LLMs.

## 2. System Architecture

The application will utilize a client-only architecture with the following components:

```
┌────────────────────────────────────────┐
│           Streamlit Frontend           │
├─────────────┬──────────────────────────┤
│ User Input  │ - Theme/Category Input   │
│             │ - LLM Selection          │
│             │ - Model Parameters       │
├─────────────┼──────────────────────────┤
│ Processing  │ - LLM API Integration    │
│             │ - JSON Generation        │
│             │ - Data Validation        │
├─────────────┼──────────────────────────┤
│ Output      │ - Vocabulary Display     │
│             │ - Export Functionality   │
│             │ - Import Functionality   │
│             │ - User Feedback/Rating   │
└─────────────┴──────────────────────────┘
```

## 3. Technical Requirements

### 3.1 Framework
- **Streamlit**: Used for the entire application interface and workflow

### 3.2 LLM Integration
- Support for multiple providers with configurable models:
  - **OpenAI**
    - GPT-4o
    - GPT-4 Turbo
    - GPT-3.5 Turbo
  - **Anthropic/Claude**
    - Claude 3 Opus
    - Claude 3 Sonnet
    - Claude 3 Haiku
  - **Groq**
    - LLaMA 3 70B
    - LLaMA 3 8B
    - Mixtral 8x7B
  - **AWS Bedrock**
    - Anthropic Claude 3 Sonnet
    - Anthropic Claude 3 Haiku
    - Cohere Command
    - Amazon Titan

### 3.3 Data Structures
The tool will generate and manipulate the following data structures:

#### 3.3.1 Words Schema
```json
{
  "id": "integer",
  "jamaican_patois": "string",
  "english": "string",
  "parts": {
    "type": "string",
    "usage": "string (optional)"
  }
}
```

#### 3.3.2 Groups Schema
```json
{
  "id": "integer",
  "name": "string"
}
```

#### 3.3.3 Word-Group Associations Schema
```json
{
  "id": "integer",
  "word_id": "integer",
  "group_id": "integer"
}
```

#### 3.3.4 Feedback/Rating Schema
```json
{
  "id": "integer",
  "timestamp": "datetime",
  "theme": "string",
  "llm_provider": "string",
  "llm_model": "string",
  "rating": "integer (1-5)",
  "comment": "string (optional)",
  "word_count": "integer"
}
```

### 3.4 Core Functionality

#### 3.4.1 Vocabulary Generation
- Input theme/category/group
- Select LLM provider and model
- Configure generation parameters (temperature, max tokens, etc.)
- Generate vocabulary items with translations and metadata
- Display generated vocabulary for review

#### 3.4.2 Export Functionality
- Export generated vocabulary as JSON files
- Support separate files for words, groups, and associations
- Support combined export in a defined format

#### 3.4.3 Import Functionality
- Import JSON files of vocabulary
- Validate against expected schema
- Preview before finalizing import
- Send to database via API calls

#### 3.4.4 User Feedback
- Allow rating of generated vocabulary (1-5 scale)
- Collect optional comments on quality
- Store feedback with metadata (LLM, model, theme, timestamp)

## 4. LLM Prompt Engineering

### 4.1 Prompt Template
The system will use a carefully engineered prompt to ensure quality and consistency:

```
You are a language expert specializing in Jamaican Patois. Your task is to generate vocabulary items for learning Jamaican Patois based on the theme: {theme}.

For each vocabulary item, provide:
1. The Jamaican Patois word or phrase
2. The English translation
3. Part of speech (noun, verb, adjective, phrase, etc.)
4. (Optional) Usage notes or context

Generate {count} vocabulary items that are authentic, commonly used, and appropriate for language learners.

Format your response as a JSON array with the following structure for each item:
{
  "jamaican_patois": "word/phrase",
  "english": "translation",
  "parts": {
    "type": "part of speech",
    "usage": "usage notes (optional)"
  }
}
```

### 4.2 Post-Processing
- Remove any non-JSON content from LLM responses
- Validate JSON structure
- Assign appropriate IDs
- Format consistently

## 5. User Interface Design

### 5.1 Input Section
- Theme/category input field
- LLM provider dropdown
- Model selection dropdown (dynamically populated based on provider)
- Generation parameters (sliders, number inputs)
- "Generate" button

### 5.2 Output Section
- Tabular display of generated vocabulary
- Export options (buttons for different formats)
- Rating interface (star/number selection)
- Comment field
- "Submit Feedback" button

### 5.3 Import Section
- File upload component
- Preview table
- Validation status indicators
- "Import to Database" button

## 6. API Integration

### 6.1 LLM APIs
- OpenAI API
- Anthropic API
- Groq API
- AWS Bedrock API

### 6.2 Backend Integration
- Connect to existing application database
- Authentication for internal use
- Endpoints for saving feedback

## 7. Data Flow

```
1. User enters theme and selects LLM
2. Application sends prompt to selected LLM
3. LLM generates vocabulary
4. Application processes and displays results
5. User reviews and can export/modify
6. User provides rating/feedback
7. Data is saved locally and/or to database
```

## 8. Storage Requirements

- Local storage for exported JSON files
- Database connection for importing to application
- Storage for feedback/ratings

## 9. Performance Considerations

- Caching of LLM responses for repeated themes
- Batch processing for large vocabulary sets
- Timeout handling for API calls

## 10. Security Considerations

- Secure API key storage (environment variables)
- Input validation to prevent prompt injection
- Rate limiting for API calls

## 11. Implementation Plan

1. Set up Streamlit application framework
2. Implement LLM provider integrations
3. Develop vocabulary generation logic
4. Create export/import functionality
5. Add user feedback mechanism
6. Connect to backend database
7. Test with various themes and models
8. Refine prompt templates based on output quality

## 12. Testing Strategy

- Unit tests for JSON processing
- Integration tests for LLM APIs
- User acceptance testing with language experts
- Performance testing with large vocabulary sets

## 13. Deliverables

- Streamlit application code
- API integration modules
- Documentation for usage
- Example JSON exports
- Prompt templates 